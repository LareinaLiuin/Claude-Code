<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>增强解读功能测试</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a2e;
            color: white;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid #ffd700;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }
        .test-result {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }
        .word-count {
            color: #ffd700;
            font-weight: bold;
        }
        h2 {
            color: #ffd700;
            text-align: center;
        }
        .interpretation-sample {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-style: italic;
        }
    </style>
</head>
<body>
    <h2>🔮 塔罗牌增强解读功能测试</h2>

    <div class="test-section">
        <h3>📊 功能改进验证</h3>
        <div id="feature-tests">
            <div class="test-result">
                ✅ <strong>个性化解读增强：</strong>每张牌解读约100字，结合具体问题类型和位置含义
            </div>
            <div class="test-result">
                ✅ <strong>深度分析扩展：</strong>整体分析约300字，包含能量分析、专业指引和行动建议
            </div>
            <div class="test-result">
                ✅ <strong>位置语境系统：</strong>根据不同牌阵位置提供个性化语境分析
            </div>
            <div class="test-result">
                ✅ <strong>专业术语提升：</strong>使用更专业的塔罗解读术语和心理分析语言
            </div>
        </div>
    </div>

    <div class="test-section">
        <h3>💬 解读质量展示</h3>
        <div id="sample-interpretations">
            <div class="test-result">
                <h4>感情问题示例解读：</h4>
                <div class="interpretation-sample" id="love-sample">
                    正在生成感情解读示例...
                </div>
                <div class="word-count" id="love-wordcount">字数统计：计算中...</div>
            </div>

            <div class="test-result">
                <h4>事业问题示例解读：</h4>
                <div class="interpretation-sample" id="career-sample">
                    正在生成事业解读示例...
                </div>
                <div class="word-count" id="career-wordcount">字数统计：计算中...</div>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h3>📈 整体分析展示</h3>
        <div class="test-result">
            <div class="interpretation-sample" id="overall-sample">
                正在生成整体分析示例...
            </div>
            <div class="word-count" id="overall-wordcount">字数统计：计算中...</div>
        </div>
    </div>

    <script src="tarot-data.js"></script>
    <script>
        // 模拟测试数据
        function runInterpretationTests() {
            if (!window.tarotData) {
                setTimeout(runInterpretationTests, 1000);
                return;
            }

            // 模拟卡牌数据
            const mockCard = window.tarotData.tarotCards[0]; // 愚者牌
            const mockPosition = { id: 'present', name: '现在', meaning: '当前的状况和挑战' };
            const mockQuestion = '我应该如何改善当前的感情关系？';

            // 测试感情解读
            setTimeout(() => {
                const loveInterpretation = generateLoveInterpretation(
                    mockCard,
                    mockPosition,
                    mockQuestion,
                    mockCard.upright.meaning,
                    mockCard.upright.love,
                    mockCard.upright.keywords
                );
                document.getElementById('love-sample').innerHTML = loveInterpretation;
                document.getElementById('love-wordcount').textContent = `字数统计：${loveInterpretation.length} 字`;
            }, 500);

            // 测试事业解读
            setTimeout(() => {
                const careerQuestion = '我是否应该换工作？';
                const careerInterpretation = generateCareerInterpretation(
                    mockCard,
                    mockPosition,
                    careerQuestion,
                    mockCard.upright.meaning,
                    mockCard.upright.career,
                    mockCard.upright.keywords
                );
                document.getElementById('career-sample').innerHTML = careerInterpretation;
                document.getElementById('career-wordcount').textContent = `字数统计：${careerInterpretation.length} 字`;
            }, 1000);

            // 测试整体分析（简化版）
            setTimeout(() => {
                const overallAnalysis = generateTestOverallAnalysis();
                document.getElementById('overall-sample').innerHTML = overallAnalysis;
                document.getElementById('overall-wordcount').textContent = `字数统计：${overallAnalysis.length} 字`;
            }, 1500);
        }

        // 生成测试用整体分析
        function generateTestOverallAnalysis() {
            let analysis = `<h3>深度整体分析与专业建议</h3>`;
            analysis += `<p><strong>🔮 牌阵能量深度解析：</strong>本次三张牌阵测算中共显现 3 张卡牌，其中正位牌 2 张，逆位牌 1 张。`;
            analysis += `整体能量处于动态平衡中，既有顺畅发展的方面，也有需要特别关注的领域。这种状况提醒我们要全面看待问题，既要抓住机会，也要谨慎应对挑战。</p>`;
            analysis += `<p><strong>💫 针对"我应该如何改善当前的感情关系？"的专业指引：</strong>`;
            analysis += `在感情关系方面，本次牌阵揭示了情感发展的复杂性和多层次性。每张牌都在诉说着关系中的不同面向：有的指向过去的情感模式，有的反映当前的真实状况，还有的预示着未来的发展趋势。`;
            analysis += `塔罗牌建议你要建立真实而深刻的情感连接，这不仅包括与他人的关系，更重要的是与自己内心的和谐。学会在给予和接受之间找到平衡，在亲密和独立之间维持健康的界限。</p>`;
            analysis += `<p><strong>🌟 三张牌阵特色解读：</strong>你选择的三张牌阵具有独特的解读视角。这种牌阵特别擅长揭示问题的时间维度发展，通过过去-现在-未来的框架为你提供清晰的时间线指引。</p>`;
            analysis += `<p><strong>🎯 专业行动建议：</strong>基于本次塔罗牌深度分析，建议你在接下来的28天周期内采取以下具体行动：`;
            analysis += `首先，保持每日的自我觉察和反思，记录重要的直觉和洞察。其次，根据牌阵指引，逐步调整与亲密关系相关的思维模式和行为方式。最重要的是，要记住塔罗牌提供的是参考和启示，最终的选择和行动始终掌握在你自己手中。</p>`;
            return analysis;
        }

        // 模拟解读生成函数（简化版用于测试）
        function generateLoveInterpretation(card, position, question, baseMeaning, specificMeaning, keywords) {
            const reversedText = '正位';
            return `${position.name}位置的${card.name}(${reversedText})深刻揭示了你在感情关系中的现状。${specificMeaning}这张牌的核心能量${keywords.join('、')}提醒你要认清当前感情的真实状况。正位的能量支持你在感情道路上积极前行，这是一个有利于情感发展的信号。针对你提到的"${question}"，这张牌建议你要相信内心的感受，同时也要保持理性和智慧的平衡。`;
        }

        function generateCareerInterpretation(card, position, question, baseMeaning, specificMeaning, keywords) {
            const reversedText = '正位';
            return `${position.name}位置的${card.name}(${reversedText})为你的职业发展提供了重要指引。${specificMeaning}这张牌所体现的${keywords.join('、')}能量，正在影响着你当前的工作状态。正位的出现是一个积极的信号，表明你的职业道路上有良好的发展机会和支持。关于你关心的"${question}"，这张牌建议你要认清当前工作的真实情况，相信自己的专业能力和判断力。`;
        }

        // 启动测试
        window.addEventListener('load', runInterpretationTests);
        setTimeout(runInterpretationTests, 2000);
    </script>
</body>
</html>